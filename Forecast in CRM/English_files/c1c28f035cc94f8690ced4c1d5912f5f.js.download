/**
 * @file postscribe
 * @description Asynchronously write javascript, even with document.write.
 * @version v2.0.8
 * @see {@link https://krux.github.io/postscribe}
 * @license MIT
 * @author Derek Brans
 * @copyright 2016 Krux Digital, Inc
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["postscribe"]=e():t["postscribe"]=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={"exports":{},"id":n,"loaded":!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=r(1),i=n(o);t.exports=i["default"]},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(){}function a(){var t=m.shift();if(t){var e=h.last(t);e.afterDequeue(),t.stream=s.apply(void 0,t),e.afterStreamStart()}}function s(t,e,r){function n(t){t=r.beforeWrite(t),g.write(t),r.afterWrite(t)}g=new p["default"](t,r),g.id=y++,g.name=r.name||g.id,u.streams[g.name]=g;var o=t.ownerDocument,s={"close":o.close,"open":o.open,"write":o.write,"writeln":o.writeln};c(o,{"close":i,"open":i,"write":function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e.join(""))},"writeln":function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e.join("")+"\n")}});var l=g.win.onerror||i;return g.win.onerror=function(t,e,n){r.error({"msg":t+" - "+e+": "+n}),l.apply(g.win,[t,e,n])},g.write(e,function(){c(o,s),g.win.onerror=l,r.done(),g=null,a()}),g}function u(t,e,r){if(h.isFunction(r))r={"done":r};else if("clear"===r)return m=[],g=null,void(y=0);r=h.defaults(r,d),t=/^#/.test(t)?window.document.getElementById(t.substr(1)):t.jquery?t[0]:t;var n=[t,e,r];return t.postscribe={"cancel":function(){n.stream?n.stream.abort():n[1]=i}},r.beforeEnqueue(n),m.push(n),g||a(),t.postscribe}e.__esModule=!0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e["default"]=u;var l=r(2),p=o(l),f=r(4),h=n(f),d={"afterAsync":i,"afterDequeue":i,"afterStreamStart":i,"afterWrite":i,"autoFix":!0,"beforeEnqueue":i,"beforeWriteToken":function(t){return t},"beforeWrite":function(t){return t},"done":i,"error":function(t){throw new Error(t.msg)},"releaseAsync":!1},y=0,m=[],g=null;c(u,{"streams":{},"queue":m,"WriteStream":p["default"]})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var r=d+e,n=t.getAttribute(r);return f.existy(n)?String(n):n}function s(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=d+e;f.existy(r)&&""!==r?t.setAttribute(n,r):t.removeAttribute(n)}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c=r(3),l=o(c),p=r(4),f=n(p),h=!1,d="data-ps-",y="ps-style",m="ps-script",g=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.root=e,this.options=r,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new l["default"]("",{"autoFix":r.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return t.prototype.write=function(){var t;for((t=this.writeQueue).push.apply(t,arguments);!this.deferredRemote&&this.writeQueue.length;){var e=this.writeQueue.shift();f.isFunction(e)?this._callFunction(e):this._writeImpl(e)}},t.prototype._callFunction=function(t){var e={"type":"function","value":t.name||t.toString()};this._onScriptStart(e),t.call(this.win,this.doc),this._onScriptDone(e)},t.prototype._writeImpl=function(t){this.parser.append(t);for(var e=void 0,r=void 0,n=void 0,o=[];(e=this.parser.readToken())&&!(r=f.isScript(e))&&!(n=f.isStyle(e));)e=this.options.beforeWriteToken(e),e&&o.push(e);o.length>0&&this._writeStaticTokens(o),r&&this._handleScriptToken(e),n&&this._handleStyleToken(e)},t.prototype._writeStaticTokens=function(t){var e=this._buildChunk(t);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,h&&(e.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),h&&(e.actualInnerHTML=this.root.innerHTML),e):null},t.prototype._buildChunk=function(t){for(var e=this.actuals.length,r=[],n=[],o=[],i=t.length,a=0;a<i;a++){var s=t[a],u=s.toString();if(r.push(u),s.attrs){if(!/^noscript$/i.test(s.tagName)){var c=e++;n.push(u.replace(/(\/?>)/," "+d+"id="+c+" $1")),s.attrs.id!==m&&s.attrs.id!==y&&o.push("atomicTag"===s.type?"":"<"+s.tagName+" "+d+"proxyof="+c+(s.unary?" />":">"))}}else n.push(u),o.push("endTag"===s.type?u:"")}return{"tokens":t,"raw":r.join(""),"actual":n.join(""),"proxy":o.join("")}},t.prototype._walkChunk=function(){for(var t=void 0,e=[this.proxyRoot];f.existy(t=e.shift());){var r=1===t.nodeType,n=r&&a(t,"proxyof");if(!n){r&&(this.actuals[a(t,"id")]=t,s(t,"id"));var o=t.parentNode&&a(t.parentNode,"proxyof");o&&this.actuals[o].appendChild(t)}e.unshift.apply(e,f.toArray(t.childNodes))}},t.prototype._handleScriptToken=function(t){var e=this,r=this.parser.clear();r&&this.writeQueue.unshift(r),t.src=t.attrs.src||t.attrs.SRC,t=this.options.beforeWriteToken(t),t&&(t.src&&this.scriptStack.length?this.deferredRemote=t:this._onScriptStart(t),this._writeScriptToken(t,function(){e._onScriptDone(t)}))},t.prototype._handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this._writeStyleToken(t),e&&this.write()},t.prototype._writeStyleToken=function(t){var e=this._buildStyle(t);this._insertCursor(e,y),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},t.prototype._buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),f.eachKey(t.attrs,function(t,r){e.setAttribute(t,r)}),e},t.prototype._insertCursor=function(t,e){this._writeImpl('<span id="'+e+'"/>');var r=this.doc.getElementById(e);r&&r.parentNode.replaceChild(t,r)},t.prototype._onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},t.prototype._onScriptDone=function(t){return t!==this.scriptStack[0]?void this.options.error({"msg":"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)))},t.prototype._writeScriptToken=function(t,e){var r=this._buildScript(t),n=this._shouldRelease(r),o=this.options.afterAsync;t.src&&(r.src=t.src,this._scriptLoadHandler(r,n?o:function(){e(),o()}));try{this._insertCursor(r,m),r.src&&!n||e()}catch(t){this.options.error(t),e()}},t.prototype._buildScript=function(t){var e=this.doc.createElement(t.tagName);return f.eachKey(t.attrs,function(t,r){e.setAttribute(t,r)}),t.content&&(e.text=t.content),e},t.prototype._scriptLoadHandler=function(t,e){function r(){t=t.onload=t.onreadystatechange=t.onerror=null}function n(){r(),null!=e&&e(),e=null}function o(t){r(),a(t),null!=e&&e(),e=null}function i(t,e){var r=t["on"+e];null!=r&&(t["_on"+e]=r)}var a=this.options.error;i(t,"load"),i(t,"error"),u(t,{"onload":function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){o({"msg":"onload handler failed "+e+" @ "+t.src})}n()},"onerror":function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void o({"msg":"onerror handler failed "+e+" @ "+t.src})}o({"msg":"remote script failed "+t.src})},"onreadystatechange":function(){/^(loaded|complete)$/.test(t.readyState)&&n()}})},t.prototype._shouldRelease=function(t){var e=/^script$/i.test(t.nodeName);return!e||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},t}();e["default"]=g},function(t,e,r){!function(e,r){t.exports=r()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={"exports":{},"id":n,"loaded":!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=r(1),i=n(o);t.exports=i["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=r(2),s=o(a),u=r(3),c=o(u),l=r(6),p=n(l),f=r(5),h={"comment":/^<!--/,"endTag":/^<\//,"atomicTag":/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,"startTag":/^</,"chars":/^[^<]/},d=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.stream=r;var o=!1,a={};for(var u in s)s.hasOwnProperty(u)&&(n.autoFix&&(a[u+"Fix"]=!0),o=o||a[u+"Fix"]);o?(this._readToken=(0,p["default"])(this,a,function(){return e._readTokenImpl()}),this._peekToken=(0,p["default"])(this,a,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return t.prototype.append=function(t){this.stream+=t},t.prototype.prepend=function(t){this.stream=t+this.stream},t.prototype._readTokenImpl=function(){var t=this._peekTokenImpl();if(t)return this.stream=this.stream.slice(t.length),t},t.prototype._peekTokenImpl=function(){for(var t in h)if(h.hasOwnProperty(t)&&h[t].test(this.stream)){var e=c[t](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},t.prototype.peekToken=function(){return this._peekToken()},t.prototype.readToken=function(){return this._readToken()},t.prototype.readTokens=function(t){for(var e=void 0;e=this.readToken();)if(t[e.type]&&t[e.type](e)===!1)return},t.prototype.clear=function(){var t=this.stream;return this.stream="",t},t.prototype.rest=function(){return this.stream},t}();e["default"]=d,d.tokenToString=function(t){return t.toString()},d.escapeAttributes=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=(0,f.escapeQuotes)(t[r],null));return e},d.supports=s;for(var y in s)s.hasOwnProperty(y)&&(d.browserHasFlaw=d.browserHasFlaw||!s[y]&&y)},function(t,e){"use strict";e.__esModule=!0;var r=!1,n=!1,o=window.document.createElement("div");try{var i="<P><I></P></I>";o.innerHTML=i,e.tagSoup=r=o.innerHTML!==i}catch(t){e.tagSoup=r=!1}try{o.innerHTML="<P><i><P></P></i></P>",e.selfClose=n=2===o.childNodes.length}catch(t){e.selfClose=n=!1}o=null,e.tagSoup=r,e.selfClose=n},function(t,e,r){"use strict";function n(t){var e=t.indexOf("-->");if(e>=0)return new c.CommentToken(t.substr(4,e-1),e+3)}function o(t){var e=t.indexOf("<");return new c.CharsToken(e>=0?e:t.length)}function i(t){var e=t.indexOf(">");if(e!==-1){var r=t.match(l.startTag);if(r){var n=function(){var t={},e={},n=r[2];return r[2].replace(l.attr,function(r,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",e[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||l.fillAttr.test(o)&&o||"":t[o]="",n=n.replace(r,"")}),{"v":new c.StartTagToken(r[1],r[0].length,t,e,(!!r[3]),n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}();if("object"===("undefined"==typeof n?"undefined":u(n)))return n.v}}}function a(t){var e=i(t);if(e){var r=t.slice(e.length);if(r.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var n=r.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(n)return new c.AtomicTagToken(e.tagName,n[0].length+e.length,e.attrs,e.booleanAttrs,n[1])}}}function s(t){var e=t.match(l.endTag);if(e)return new c.EndTagToken(e[1],e[0].length)}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.comment=n,e.chars=o,e.startTag=i,e.atomicTag=a,e.endTag=s;var c=r(4),l={"startTag":/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,"endTag":/^<\/([\-A-Za-z0-9_]+)[^>]*>/,"attr":/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,"fillAttr":/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.EndTagToken=e.AtomicTagToken=e.StartTagToken=e.TagToken=e.CharsToken=e.CommentToken=e.Token=void 0;var o=r(5),i=(e.Token=function t(e,r){n(this,t),this.type=e,this.length=r,this.text=""},e.CommentToken=function(){function t(e,r){n(this,t),this.type="comment",this.length=r||(e?e.length:0),this.text="",this.content=e}return t.prototype.toString=function(){return"<!--"+this.content},t}(),e.CharsToken=function(){function t(e){n(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),e.TagToken=function(){function t(e,r,o,i,a){n(this,t),this.type=e,this.length=o,this.text="",this.tagName=r,this.attrs=i,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1}return t.formatTag=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r="<"+t.tagName;for(var n in t.attrs)if(t.attrs.hasOwnProperty(n)){r+=" "+n;var i=t.attrs[n];"undefined"!=typeof t.booleanAttrs&&"undefined"!=typeof t.booleanAttrs[n]||(r+='="'+(0,o.escapeQuotes)(i)+'"')}return t.rest&&(r+=" "+t.rest),r+=t.unary&&!t.html5Unary?"/>":">",void 0!==e&&null!==e&&(r+=e+"</"+t.tagName+">"),r},t}());e.StartTagToken=function(){function t(e,r,o,i,a,s){n(this,t),this.type="startTag",this.length=r,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.html5Unary=!1,this.unary=a,this.rest=s}return t.prototype.toString=function(){return i.formatTag(this)},t}(),e.AtomicTagToken=function(){function t(e,r,o,i,a){n(this,t),this.type="atomicTag",this.length=r,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1,this.content=a}return t.prototype.toString=function(){return i.formatTag(this,this.content)},t}(),e.EndTagToken=function(){function t(e,r){n(this,t),this.type="endTag",this.length=r,this.text="",this.tagName=e}return t.prototype.toString=function(){return"</"+this.tagName+">"},t}()},function(t,e){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?t.replace(/([^"]*)"/g,function(t,e){return/\\/.test(e)?e+'"':e+'\\"'}):e}e.__esModule=!0,e.escapeQuotes=r},function(t,e){"use strict";function r(t){return t&&"startTag"===t.type&&(t.unary=s.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t}function n(t,e){var n=t.stream,o=r(e());return t.stream=n,o}function o(t,e){var r=e.pop();t.prepend("</"+r.tagName+">")}function i(){var t=[];return t.last=function(){return this[this.length-1]},t.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},t.containsTagName=function(t){for(var e,r=0;e=this[r];r++)if(e.tagName===t)return!0;return!1},t}function a(t,e,a){function s(){var e=n(t,a);e&&l[e.type]&&l[e.type](e)}var c=i(),l={"startTag":function(r){var n=r.tagName;"TR"===n.toUpperCase()&&c.lastTagNameEq("TABLE")?(t.prepend("<TBODY>"),s()):e.selfCloseFix&&u.test(n)&&c.containsTagName(n)?c.lastTagNameEq(n)?o(t,c):(t.prepend("</"+r.tagName+">"),s()):r.unary||c.push(r)},"endTag":function(r){var n=c.last();n?e.tagSoupFix&&!c.lastTagNameEq(r.tagName)?o(t,c):c.pop():e.tagSoupFix&&(a(),s())}};return function(){return s(),r(a())}}e.__esModule=!0,e["default"]=a;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,u=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])})},function(t,e){"use strict";function r(t){return void 0!==t&&null!==t}function n(t){return"function"==typeof t}function o(t,e,r){var n=void 0,o=t&&t.length||0;for(n=0;n<o;n++)e.call(r,t[n],n)}function i(t,e,r){for(var n in t)t.hasOwnProperty(n)&&e.call(r,n,t[n])}function a(t,e){return t=t||{},i(e,function(e,n){r(t[e])||(t[e]=n)}),t}function s(t){try{return Array.prototype.slice.call(t)}catch(r){var e=function(){var e=[];return o(t,function(t){e.push(t)}),{"v":e}}();if("object"===("undefined"==typeof e?"undefined":f(e)))return e.v}}function u(t){return t[t.length-1]}function c(t,e){return!(!t||"startTag"!==t.type&&"atomicTag"!==t.type||!("tagName"in t))&&!!~t.tagName.toLowerCase().indexOf(e)}function l(t){return c(t,"script")}function p(t){return c(t,"style")}e.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.existy=r,e.isFunction=n,e.each=o,e.eachKey=i,e.defaults=a,e.toArray=s,e.last=u,e.isTag=c,e.isScript=l,e.isStyle=p}])});
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.ZTMZSEC=factory()})(this,function(){"use strict";function defineProperty(obj,property,value,isOverrideDefaultValue,isWritable,isConfigurable,isEnumerable){if(!isOverrideDefaultValue&&property in obj){return}if(!Object.defineProperty||!function(){try{Object.defineProperty({},"x",{});return true}catch(e){return false}}()){obj[property]=value;return obj}isWritable=isWritable===true;isConfigurable=isConfigurable===true;isEnumerable=isEnumerable===true;return Object.defineProperty(obj,property,{value:value,writable:isWritable,configurable:isConfigurable,enumerable:isEnumerable})}var codePointAt=String.prototype.codePointAt;if(!codePointAt){codePointAt=function codePointAt(position){if(this===null){throw new TypeError(" ")}var string=String(this);var size=string.length;var index=position?Number(position):0;if(window.isNan(index)){index=0}if(index<0||index>=size){return undefined}var first=string.charCodeAt(index);var second=void 0;if(first>=55296&&first<=56319&&size>index+1){second=string.charCodeAt(index+1);if(second>=56320&&second<=57343){return(first-55296)*1024+second-56320+65536}}return first}}var fromCodePoint=String.fromCodePoint;if(!fromCodePoint){var stringFromCharCode=String.fromCharCode;var floor=Math.floor;fromCodePoint=function fromCodePoint(){var MAX_SIZE=16384;var codeUnits=[];for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var length=args.length;var highSurrogate=void 0;var lowSurrogate=void 0;var index=-1;if(!length){return""}var result="";while(++index<length){var codePoint=Number(args[index]);if(!isFinite(codePoint)||codePoint<0||codePoint>1114111||floor(codePoint)!==codePoint){throw new RangeError("Invalid code point: "+codePoint)}if(codePoint<=65535){codeUnits.push(codePoint)}else{codePoint-=65536;highSurrogate=(codePoint>>10)+55296;lowSurrogate=codePoint%1024+56320;codeUnits.push(highSurrogate,lowSurrogate)}if(index+1===length||codeUnits.length>MAX_SIZE){result+=stringFromCharCode.apply(undefined,codeUnits);codeUnits.length=0}}return result}}var ZTMZSEC$1=window&&window.ZTMZSEC?window.ZTMZSEC:{version:"5.2.0"};if(!ZTMZSEC$1.defineProperty){ZTMZSEC$1.defineProperty=defineProperty}if(!ZTMZSEC$1["5.2.0"]){ZTMZSEC$1["5.2.0"]={version:"5.2.0",defineProperty:defineProperty}}function indexOfPolyfill(searchElement){if(this===undefined||this===null){throw new TypeError(" ")}var t={};var len=t.length>>>0;if(len===0){return-1}var n=0;if((arguments.length<=1?0:arguments.length-1)>0){n=Number(arguments.length<=2?undefined:arguments[2]);if(isNaN(n)){n=0}else if(n!==0&&n!==1/0&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}}if(n>=len){return-1}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t.charAt(k)===searchElement){return k}}return-1}var arrayIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:indexOfPolyfill;var Encoder={};function toCharCodeArr(charArr){var charCodeArr=[];for(var i=0;i<charArr.length;i++){charCodeArr.push(charArr[i].charCodeAt(0))}return charCodeArr}var IMMUNE={HTML:toCharCodeArr([",",".","-","_"," "]),HTMLATTR:toCharCodeArr([",",".","-","_"]),CSS:toCharCodeArr([]),JAVASCRIPT:toCharCodeArr([",",".","_"])};var characterToEntityMap={};var characterToEntityArray="34=&quot|38=&amp|60=&lt|62=&gt|160=&nbsp|161=&iexcl|162=&cent|163=&pound|164=&curren|165=&yen|166=&brvbar|167=&sect|168=&uml|169=&copy|170=&ordf|171=&laquo|172=&not|173=&shy|174=&reg|175=&macr|176=&deg|177=&plusmn|178=&sup2|179=&sup3|180=&acute|181=&micro|182=&para|183=&middot|184=&cedil|185=&sup1|186=&ordm|187=&raquo|188=&frac14|189=&frac12|190=&frac34|191=&iquest|192=&Agrave|193=&Aacute|194=&Acirc|195=&Atilde|196=&Auml|197=&Aring|198=&AElig|199=&Ccedil|200=&Egrave|201=&Eacute|202=&Ecirc|203=&Euml|204=&Igrave|205=&Iacute|206=&Icirc|207=&Iuml|208=&ETH|209=&Ntilde|210=&Ograve|211=&Oacute|212=&Ocirc|213=&Otilde|214=&Ouml|215=&times|216=&Oslash|217=&Ugrave|218=&Uacute|219=&Ucirc|220=&Uuml|221=&Yacute|222=&THORN|223=&szlig|224=&agrave|225=&aacute|226=&acirc|227=&atilde|228=&auml|229=&aring|230=&aelig|231=&ccedil|232=&egrave|233=&eacute|234=&ecirc|235=&euml|236=&igrave|237=&iacute|238=&icirc|239=&iuml|240=&eth|241=&ntilde|242=&ograve|243=&oacute|244=&ocirc|245=&otilde|246=&ouml|247=&divide|248=&oslash|249=&ugrave|250=&uacute|251=&ucirc|252=&uuml|253=&yacute|254=&thorn|255=&yuml|338=&OElig|339=&oelig|352=&Scaron|353=&scaron|376=&Yuml|402=&fnof|710=&circ|732=&tilde|913=&Alpha|914=&Beta|915=&Gamma|916=&Delta|917=&Epsilon|918=&Zeta|919=&Eta|920=&Theta|921=&Iota|922=&Kappa|923=&Lambda|924=&Mu|925=&Nu|926=&Xi|927=&Omicron|928=&Pi|929=&Rho|931=&Sigma|932=&Tau|933=&Upsilon|934=&Phi|935=&Chi|936=&Psi|937=&Omega|945=&alpha|946=&beta|947=&gamma|948=&delta|949=&epsilon|950=&zeta|951=&eta|952=&theta|953=&iota|954=&kappa|955=&lambda|956=&mu|957=&nu|958=&xi|959=&omicron|960=&pi|961=&rho|962=&sigmaf|963=&sigma|964=&tau|965=&upsilon|966=&phi|967=&chi|968=&psi|969=&omega|977=&thetasym|978=&upsih|982=&piv|8194=&ensp|8195=&emsp|8201=&thinsp|8204=&zwnj|8205=&zwj|8206=&lrm|8207=&rlm|8211=&ndash|8212=&mdash|8216=&lsquo|8217=&rsquo|8218=&sbquo|8220=&ldquo|8221=&rdquo|8222=&bdquo|8224=&dagger|8225=&Dagger|8226=&bull|8230=&hellip|8240=&permil|8242=&prime|8243=&Prime|8249=&lsaquo|8250=&rsaquo|8254=&oline|8260=&frasl|8364=&euro|8465=&image|8472=&weierp|8476=&real|8482=&trade|8501=&alefsym|8592=&larr|8593=&uarr|8594=&rarr|8595=&darr|8596=&harr|8629=&crarr|8656=&lArr|8657=&uArr|8658=&rArr|8659=&dArr|8660=&hArr|8704=&forall|8706=&part|8707=&exist|8709=&empty|8711=&nabla|8712=&isin|8713=&notin|8715=&ni|8719=&prod|8721=&sum|8722=&minus|8727=&lowast|8730=&radic|8733=&prop|8734=&infin|8736=&ang|8743=&and|8744=&or|8745=&cap|8746=&cup|8747=&int|8756=&there4|8764=&sim|8773=&cong|8776=&asymp|8800=&ne|8801=&equiv|8804=&le|8805=&ge|8834=&sub|8835=&sup|8836=&nsub|8838=&sube|8839=&supe|8853=&oplus|8855=&otimes|8869=&perp|8901=&sdot|8968=&lceil|8969=&rceil|8970=&lfloor|8971=&rfloor|10216=&lang|10217=&rang|9674=&loz|9824=&spades|9827=&clubs|9829=&hearts|9830=&diams";characterToEntityArray=characterToEntityArray.split("|");for(var i=0;i<characterToEntityArray.length;i++){var eachEntry=characterToEntityArray[i].split("=");characterToEntityMap[eachEntry[0]]=eachEntry[1]}var hex=[];for(var c=0;c<255;c++){if(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122){hex[c]=null}else{hex[c]=c.toString(16)}}function getHexForNonAlphanumeric(c){if(c<256){return hex[c]}return c.toString(16)}function encodeHTMLCharacter(immuneCharList,c){if(arrayIndexOf.call(immuneCharList,c)!==-1){return fromCodePoint(c)}var hex=getHexForNonAlphanumeric(c);if(hex===null){return fromCodePoint(c)}if(c<=31&&c!=9&&c!=10&&c!=13||c>=127&&c<=159||c===32){return"&#x20;"}var entityName=characterToEntityMap[c];if(entityName!==undefined){return entityName+";"}return"&#x"+hex+";"}function encodeJSCharacter(immuneCharList,c){if(arrayIndexOf.call(immuneCharList,c)!==-1){return String.fromCharCode(c)}var hex=getHexForNonAlphanumeric(c);if(hex===null){return String.fromCharCode(c)}var tmp=c.toString(16);var pad=void 0;if(c<256){pad="00".substr(tmp.length);return"\\x"+pad+tmp.toUpperCase()}pad="0000".substr(tmp.length);return"\\u"+pad+tmp.toUpperCase()}function encodeCSSCharacter(immuneCharList,c){if(arrayIndexOf.call(immuneCharList,c)!==-1){return fromCodePoint(c)}var hex=getHexForNonAlphanumeric(c);if(hex===null){return fromCodePoint(c)}return"\\"+hex+" "}function encode(immuneCharList,sInput,characterEncoder,isHandleUnicodeChar){if(sInput===null||sInput===undefined||typeof sInput!=="string"){return sInput}var out="";for(var _i=0;_i<sInput.length;_i++){if(isHandleUnicodeChar){var _c=codePointAt.call(sInput,_i);out+=characterEncoder(immuneCharList,_c,isHandleUnicodeChar);if(_c>65535){_i++}}else{out+=characterEncoder(immuneCharList,sInput.charCodeAt(_i))}}return out}Encoder.encodeForHTML=function(input){return encode(IMMUNE.HTML,input,encodeHTMLCharacter,true)};Encoder.encodeForHTMLAttribute=function(input){return encode(IMMUNE.HTMLATTR,input,encodeHTMLCharacter,true)};Encoder.encodeForJavaScript=function(input){return encode(IMMUNE.JAVASCRIPT,input,encodeJSCharacter,false)};Encoder.encodeForCSS=function(input){return encode(IMMUNE.CSS,input,encodeCSSCharacter,true)};if(Object.freeze){Object.freeze(Encoder)}if(ZTMZSEC$1.version==="5.2.0"&&!ZTMZSEC$1.Encoder){ZTMZSEC$1.defineProperty(ZTMZSEC$1,"Encoder",Encoder,true,false,false,true)}if(!ZTMZSEC$1["5.2.0"].Encoder){ZTMZSEC$1.defineProperty(ZTMZSEC$1["5.2.0"],"Encoder",Encoder,true,false,false,true)}return ZTMZSEC$1});var config="";(function(w){var DATA_VARIABLE_NAME="ZTMData";var JS_CUSTOM_EVENT_NAME="ztm.customevent";var data={"variables":{"Page URL":{"subType":1,"type":1},"Page Host":{"subType":3,"type":1},"Page Path":{"subType":5,"type":1},"zglobal_Acookie_optOut":{"cookieKey":"zglobal_Acookie_optOut","type":6}},"triggers":{"PV - ZCreator Help Pages":{"filters":[{"value":"help.zoho.com","key":"Page Host","operator":0},{"value":"/portal/en/kb/creator","key":"Page Path","operator":2}],"type":1,"tags":["SIQ - Zoho Help - All Webpages","ASAP - ZCreator - Help Pages"]},"PV - ZCRM Help Pages":{"filters":[{"value":"/portal/en/kb/crm","key":"Page Path","operator":2},{"value":"help.zoho.com","key":"Page Host","operator":0}],"type":1,"tags":["SIQ - Zoho Help - All Webpages","SIQ - ZCRM - Help Pages"]},"All Pages":{"filters":[],"type":1,"tags":["PS - Heatmap - All Webpages","SIQ - Zoho Help - All Webpages"]},"CE - Global Cookie OptOut - True":{"custom_event_name":".*","custom_event_use_regex":true,"filters":[{"value":"true","key":"zglobal_Acookie_optOut","operator":0}],"type":4,"tags":["PS - Heatmap - All Webpages","SIQ - Zoho Help - All Webpages"]}},"is_click_link_present":false,"click_listener_required":false,"tags":{"ASAP - ZCreator - Help Pages":{"before_fire":"","after_fire":"","html":"<script type=\"text/javascript\" nonce=\"{place_your_nonce_value_here}\" src=\"https://desk.zoho.com/portal/api/web/inapp/4015681477121?orgId=4241905\" defer><\/script>","type":1,"exceptions":[]},"SIQ - Zoho Help - All Webpages":{"before_fire":"","after_fire":"","html":"<script type=\"text/javascript\">(function(w,s){e=document.createElement(\"script\");e.type=\"text/javascript\";e.id=\"siquts\";e.async=true;e.src=\"https://widgets.zohosalesiq.com/app.js?widgetcode=939491ee78deb6c78ed28920ab1ad50d141fb2982b592076aacf0f539c43b2d9\";var x=document.getElementsByTagName(\"script\")[0];x.parentNode.insertBefore(e,x);})(window,\"script\");\n  var $zoho = $zoho || {};\n  $zoho.salesiq = $zoho.salesiq || {};\n  if($zoho.hasOwnProperty('salesiq')) { $zoho.livedesk = $zoho.salesiq;}\n  $zoho.salesiq.ready=function(embedinfo) {\n    $zoho.salesiq.tracking.domain(\"zoho.com\");\n  }\n<\/script>\n\n","type":1,"exceptions":["CE - Global Cookie OptOut - True","PV - ZCRM Help Pages","PV - ZCreator Help Pages"]},"SIQ - ZCRM - Help Pages":{"before_fire":"","after_fire":"","html":"<script type=\"text/javascript\">(function(w,s){e=document.createElement(\"script\");e.type=\"text/javascript\";e.id=\"siquts\";e.async=true;e.src=\"https://widgets.zohosalesiq.com/app.js?widgetcode=96f66ce99a169884b6edc135f7757e8f0961698f04720df05c4cb4d315e7b4477cadf734714070366e2b29d9bd1f165b\";var x=document.getElementsByTagName(\"script\")[0];x.parentNode.insertBefore(e,x);})(window,\"script\");\n  var $zoho = $zoho || {};\n  $zoho.salesiq = $zoho.salesiq || {};\n  if($zoho.hasOwnProperty('salesiq')) { $zoho.livedesk = $zoho.salesiq;}\n  $zoho.salesiq.ready=function(embedinfo) {\n    $zoho.salesiq.tracking.domain(\"zoho.com\");\n  }\n<\/script>","type":1,"exceptions":[]},"PS - Heatmap - All Webpages":{"before_fire":"","after_fire":"","html":"<script src=\"https://cdn.pagesense.io/js/fzloyco9/a63a3daff87f4d33b6cffbe7a949ff5f.js\"><\/script>","type":1,"exceptions":["CE - Global Cookie OptOut - True"]}}};var config={};config.genericMthd=function(configparam){var variable=varvalidation.getVariableFromId(configparam);var variableValue=varvalidation.getVariableValue(variable);return variableValue};var LOGGER={isLoggerEnabled:function(){var url=new URL(window.location.href);return url.searchParams.get("ztm")!=null&&url.searchParams.get("ztm")==="test"},log:function(){if(LOGGER.isLoggerEnabled()){console.log.apply(null,arguments)}},error:function(){if(LOGGER.isLoggerEnabled()){console.error.apply(null,arguments)}},debug:function(){if(LOGGER.isLoggerEnabled()){console.debug.apply(null,arguments)}}};var ZTMDataHandler={currentZTMDataSnapShot:{},customEventQueue:[],processDataObjectPush:function(dataObject,pushEventToQueue){if(typeof dataObject==="object"){var internalQueue=[];for(var key in dataObject){var value=dataObject[key];if(key==="event"){if(pushEventToQueue){ZTMDataHandler.customEventQueue.push(value)}else{internalQueue.push(value)}}else{ZTMDataHandler.currentZTMDataSnapShot[key]=value}}for(var i=0;i<internalQueue.length;i++){var eventName=internalQueue[i];if(eventName!==EventHandler.CONSTANTS.LINK_CLICK_EVENT){EventHandler.transmitCustomEvent(eventName)}}}},getValue:function(variableName){if(ZTMDataHandler.currentZTMDataSnapShot.hasOwnProperty(variableName)){return ZTMDataHandler.currentZTMDataSnapShot[variableName]}return""},processQueue:function(){window[DATA_VARIABLE_NAME]=window[DATA_VARIABLE_NAME]?window[DATA_VARIABLE_NAME]:[];var queue=window[DATA_VARIABLE_NAME];for(var i=0;i<queue.length;i++){var dataObject=queue[i];ZTMDataHandler.processDataObjectPush(dataObject,true)}window[DATA_VARIABLE_NAME].push=function(){ZTMDataHandler.processDataObjectPush(arguments[0]);return Array.prototype.push.apply(this,arguments)}},dispatchEventQueue:function(){var length=ZTMDataHandler.customEventQueue.length;for(var i=0;i<length;i++){var event=ZTMDataHandler.customEventQueue[i];EventHandler.transmitCustomEvent(event)}}};var ztm={exists:function(value){if(value===undefined||value===null||value===""){return false}if(typeof value=="object"&&Object.keys(value).length==0){return false}if(value.constructor==Object&&Object.keys(value).length==0){return false}return true},parseURL:function(url){var url=new URL(url);return url},isHostMatch:function(host1,host2,exlwww){exlwww=!!exlwww;if(!exlwww&&host1===host2){return true}else if(exlwww&&host1.replace(/^www./,"")===host2.replace(/^www./,"")){return true}else{return false}}};var varvalidation={contains:function(str,val){if(str.indexOf(val)>-1){return true}else{return false}},startsWith:function(str,val){if(str.startsWith(val)){return true}else{return false}},endsWith:function(str,val){if(str.endsWith(val)){return true}else{return false}},matchRegex:function(str,regex){if(!(regex instanceof RegExp)){regex=new RegExp(regex,"g")}if(regex.test(str)){return true}else{return false}},notMatchRegex:function(str,regex){return!this.matchregex(str,regex)},getCurrentURLComponent:function(ctype,paramName){return this.getURLComponent(document.URL,ctype,paramName)},getReferrerURLComponent:function(ctype,paramName){return this.getURLComponent(document.referrer,ctype,paramName)},getURLComponent:function(url,ctype,paramName){if(!ztm.exists(url)){return""}var parsedURL=ztm.parseURL(url);switch(ctype){case 1:return parsedURL.toString();case 2:return parsedURL.protocol||undefined;case 3:return parsedURL.host||undefined;case 4:return parsedURL.port||undefined;case 5:return parsedURL.pathname||undefined;case 6:return parsedURL.searchParams.get(paramName)||undefined;break;default:break}},getCustomJSValue:function(funcName){try{var func=config[funcName];return func()}catch(e){LOGGER.error("Error occured while executing custom JS:",funcName,", Error:",e)}},getFirstPartyCookieValue:function(cookieKey){try{var cookieKeyRegex=new RegExp(cookieKey+"=([^;]*)");var matches=document.cookie.match(cookieKeyRegex);if(ztm.exists(matches)){return matches[1]}}catch(e){LOGGER.error("Error occured while getting FP cookie:",cookieKey,", Error:",e)}},validate:function(operator,value1,value2){if(!ztm.exists(operator)||!ztm.exists(value1)||!ztm.exists(value2)){return false}switch(operator){case 0:return value1===value2;break;case 1:return value1!==value2;break;case 2:return this.contains(value1,value2);break;case 3:return!this.contains(value1,value2);break;case 4:return this.startsWith(value1,value2);break;case 5:return!this.startsWith(value1,value2);break;case 6:return this.endsWith(value1,value2);break;case 7:return!this.endsWith(value1,value2);break;case 8:return this.matchRegex(value1,value2);break;case 9:return!this.matchRegex(value1,value2);break;case 10:return value1<value2;break;case 11:return value1<=value2;break;case 12:return value1>value2;break;case 13:return value1>=value2;break;default:return false;break}},getVariableValue:function(variable,key){try{if(!ztm.exists(variable)){return}switch(variable.type){case 1:return this.getCurrentURLComponent(variable.subType,variable.paramName);case 2:return this.getReferrerURLComponent(variable.subType,variable.paramName);case 3:case 4:case 7:return this.getCustomJSValue(key);case 5:return ZTMDataHandler.getValue(variable.dataLayerName);case 6:return this.getFirstPartyCookieValue(variable.cookieKey);default:break}}catch(error){LOGGER.error("Error occured while processing variable:",variable,", Error:",error)}},getVariableFromId:function(vid){if(!ztm.exists(vid)){return null}return data.variables[vid]},isFiltersSatistied:function(filters){for(var i=0;i<filters.length;i++){var filter=filters[i];var key=filter.key;var variable=this.getVariableFromId(filter.key);var variable_value=this.getVariableValue(variable,key);var flag=this.validate(filter.operator,variable_value,filter.value);if(!flag){return false}}return true}};function processTag(tag){try{if(tag.type==1){var html=tag.html;var exp=new RegExp("{{(.*?)}}","g");var match=exp.exec(html);var variableValueMap={};while(match){var variableName=match[1];if(!variableValueMap.hasOwnProperty(variableName)){var variable=varvalidation.getVariableFromId(variableName);var value=varvalidation.getVariableValue(variable,variableName);variableValueMap[variableName]=value}match=exp.exec(html)}for(var key in variableValueMap){var value=ZTMZSEC.Encoder.encodeForJavaScript(variableValueMap[key]);html=html.replace(new RegExp("{{"+key+"}}","g"),value)}LOGGER.log("After replacing variables:",html);window.postscribe(document.getElementsByTagName("body")[0],html);LOGGER.debug("Tag applied successfully:",tag,", Result html:",html)}}catch(ex){LOGGER.error("Exception occured while executing tag",ex,"::Tag content::",tag)}}function sortTags(tags){try{if(tags&&tags.length>0){var getBeforeRefs=function(value){var beforeRefs=[];for(var i=0;i<tags.length;i++){var ele=tags[i];if(ele.before_fire===value){beforeRefs.push(ele)}}return beforeRefs};var incrementScore=function(value,additionalScore){for(var i=0;i<tags.length;i++){if(tags[i].name===value){tags[i].score=tags[i].score+1;if(additionalScore){tags[i].score=tags[i].score+additionalScore}}}};var findElement=function(value){for(var i=0;i<tags.length;i++){var ele=tags[i];if(ele.name===value){return ele}}};var traverseAndSetScore=function(elem,list,parent){if(elem.after_fire){var bef=findElement(elem.after_fire);if(bef){if(list.indexOf(bef.name)===-1){incrementScore(parent);list.push(bef.name);traverseAndSetScore(bef,list,parent)}}}else{var beforeRefs=getBeforeRefs(elem.name);for(var i=0;i<beforeRefs.length;i++){if(list.indexOf(beforeRefs[i].name)===-1){incrementScore(parent);list.push(beforeRefs[i].name);traverseAndSetScore(beforeRefs[i],list,parent)}}}};for(var i=0;i<tags.length;i++){traverseAndSetScore(tags[i],[tags[i].name],tags[i].name)}tags.sort(function(a,b){return a.score>b.score?-1:1})}}catch(error){LOGGER.error("Exception occured while sorting tags:",error)}return tags}var EventHandler={CONSTANTS:{JS_CUSTOM_EVENT_NAME:"ztm.customevent",WINDOW_LOAD_EVENT:"ztm_event.windowload",DOM_READY_EVENT:"ztm_event.domready",PAGE_LOAD_EVENT:"ztm_event.pageload",CLICK_EVENT:"ztm_event.click",LINK_CLICK_EVENT:"ztm_event.linkclick",EVENT_TRIGGER_MAP:{"ztm_event.windowload":3,"ztm_event.domready":2,"ztm_event.pageload":1,"ztm_event.click":5,"ztm_event.linkclick":6},ELEMENT_ATTRIUTES:{ELEMENT:"ztm.element",ELEMENT_ID:"ztm.elementId",ELEMENT_ATTRIUTE:"ztm.elementAttribute",ELEMENT_CLASS:"ztm.elementClasses",ELEMENT_TARGET:"ztm.elementTarget",ELEMENT_TEXT:"ztm.elementText",ELEMENT_URL:"ztm.elementUrl",ELEMENT_TYPE:"ztm.elementType"}},transmitCustomEvent:function(customEventName){var evt=new CustomEvent(JS_CUSTOM_EVENT_NAME,{detail:customEventName});window.dispatchEvent(evt)},onPageLoad:function(){var eventobj={};eventobj.event=EventHandler.CONSTANTS.PAGE_LOAD_EVENT;window[DATA_VARIABLE_NAME].push(eventobj)},onClick:function(event){try{var eventobj={};var element=event.target;if(data.is_click_link_present&&element.nodeName==="A"&&ztm.exists(element.href)){eventobj.event=EventHandler.CONSTANTS.LINK_CLICK_EVENT}else{eventobj.event=EventHandler.CONSTANTS.CLICK_EVENT}eventobj[EventHandler.CONSTANTS.ELEMENT_ATTRIUTES.ELEMENT]=element;eventobj[EventHandler.CONSTANTS.ELEMENT_ATTRIUTES.ELEMENT_ID]=element.id;eventobj[EventHandler.CONSTANTS.ELEMENT_ATTRIUTES.ELEMENT_CLASS]=element.classList.value;eventobj[EventHandler.CONSTANTS.ELEMENT_ATTRIUTES.ELEMENT_TARGET]=element.target;eventobj[EventHandler.CONSTANTS.ELEMENT_ATTRIUTES.ELEMENT_TEXT]=element.innerText;eventobj[EventHandler.CONSTANTS.ELEMENT_ATTRIUTES.ELEMENT_URL]=element.href;eventobj[EventHandler.CONSTANTS.ELEMENT_ATTRIUTES.ELEMENT_TYPE]=element.nodeType;window[DATA_VARIABLE_NAME].push(eventobj);LOGGER.debug("Event triggered",eventobj,event);if(eventobj.event===EventHandler.CONSTANTS.LINK_CLICK_EVENT){EventHandler.onCustomEvent(event)}}catch(error){LOGGER.error("Error occured in click trigger",error)}},onDOMReady:function(){EventHandler.onPageLoad();if(data.click_listener_required){document.body.addEventListener("click",EventHandler.onClick)}var eventobj={};eventobj.event=EventHandler.CONSTANTS.DOM_READY_EVENT;window[DATA_VARIABLE_NAME].push(eventobj)},onWindowLoadEvent:function(){var eventobj={};eventobj.event=EventHandler.CONSTANTS.WINDOW_LOAD_EVENT;window[DATA_VARIABLE_NAME].push(eventobj)},reTriggerClick:function(event){document.body.removeEventListener("click",EventHandler.onClick);event.target.click();document.body.addEventListener("click",EventHandler.onClick)},handleLinkClickDelay:function(linkClickTriggers,event){var waitTime=0;for(var key in linkClickTriggers){var trigger=linkClickTriggers[key];if(trigger.wait_for_tag){waitTime=waitTime<trigger.wait_time?trigger.wait_time:waitTime}}if(waitTime>0){event.preventDefault();return setTimeout(function(){EventHandler.reTriggerClick(event)},waitTime)}},onCustomEvent:function(event){var isLinkClickEvent=event instanceof MouseEvent;var eventName=isLinkClickEvent?EventHandler.CONSTANTS.LINK_CLICK_EVENT:event.detail;var validTriggers={};var timeout=null;try{if(EventHandler.CONSTANTS.EVENT_TRIGGER_MAP.hasOwnProperty(eventName)){var triggerType=EventHandler.CONSTANTS.EVENT_TRIGGER_MAP[eventName];var triggers=TriggerHandler.getValidTriggersByType(triggerType);if(isLinkClickEvent){timeout=EventHandler.handleLinkClickDelay(triggers,event)}validTriggers=triggers}var customEventTriggers=TriggerHandler.getValidTriggersByType(TriggerHandler.triggerTypes.CUSTOM_EVENT,eventName);validTriggers=Object.assign(validTriggers,customEventTriggers);var tagList=[];var sortingRequired=false;for(var key in validTriggers){var trigger=validTriggers[key];var tags=trigger.tags;LOGGER.log("Triggered:",key,", tags to be applied:",tags);for(var j=0;j<tags.length;j++){var tagid=tags[j];var tag=data.tags[tagid];tag.name=tagid;tag.score=0;tagList.push(tag);if(!sortingRequired&&(tag.before_fire&&tag.before_fire.length>0||tag.after_fire&&tag.after_fire.length>0)){sortingRequired=true}}}if(sortingRequired){tagList=sortTags(tagList);LOGGER.debug("Tags sorted: execution order: ",tagList)}for(var j=0;j<tagList.length;j++){var tag=tagList[j];if(ztm.exists(tag.exceptions)){var exceptionAvailable=false;for(var i=0;i<tag.exceptions.length;i++){var exceptionTrigger=tag.exceptions[i];if(validTriggers.hasOwnProperty(exceptionTrigger)){exceptionAvailable=true;LOGGER.debug("Skipping the tag as it is having an exception with trigger",tag,"exceptionTrigger:",exceptionTrigger);break}}if(exceptionAvailable){continue}}processTag(tag);LOGGER.debug("Tag applied:",tag.name,", Tag content:",tag)}}catch(error){LOGGER.error("Exception occured",error)}if(timeout!=null){clearTimeout(timeout);EventHandler.reTriggerClick(event)}},registerListeners:function(){try{if(window.addEventListener){window.addEventListener(JS_CUSTOM_EVENT_NAME,EventHandler.onCustomEvent,false)}else{window.attachEvent(JS_CUSTOM_EVENT_NAME,EventHandler.onCustomEvent)}}catch(error){LOGGER.error("Exception occured while registering Custom event",error)}try{if(document.readyState=="loading"){document.addEventListener("DOMContentLoaded",EventHandler.onDOMReady,false)}else{EventHandler.onDOMReady()}}catch(error){LOGGER.error("Exception occured while registering DOM load event",error)}try{if(window.addEventListener){if(["complete"].indexOf(document.readyState)!==-1){EventHandler.onWindowLoadEvent()}else{window.addEventListener("load",EventHandler.onWindowLoadEvent,false)}}else{if(["complete"].indexOf(document.readyState)!==-1){EventHandler.onWindowLoadEvent()}else{window.attachEvent("onload",EventHandler.onWindowLoadEvent)}}}catch(error){LOGGER.error("Exception occured while registering Custom event",error)}}};var TriggerHandler={triggerTypes:{PAGE_VIEW:1,DOM_READY:2,WINDOW_READY:3,CUSTOM_EVENT:4},triggersByType:{},processTriggers:function(){var triggers=data.triggers;if(!ztm.exists(triggers)){return}for(var triggerid in triggers){if(triggers.hasOwnProperty(triggerid)){var trigger=triggers[triggerid];if(!TriggerHandler.triggersByType.hasOwnProperty(trigger.type)){TriggerHandler.triggersByType[trigger.type]={}}TriggerHandler.triggersByType[trigger.type][triggerid]=trigger}}},getTriggersByType:function(triggerType){if(TriggerHandler.triggersByType.hasOwnProperty(triggerType)){return TriggerHandler.triggersByType[triggerType]}return{}},isTriggerFiltersSatisfied:function(trigger){if(!ztm.exists(trigger.filters)){return true}return varvalidation.isFiltersSatistied(trigger.filters)},getValidTriggersByType:function(triggerType,customEventName){var triggers=TriggerHandler.getTriggersByType(triggerType);var validTriggers={};for(var key in triggers){var trigger=triggers[key];if(customEventName){var triggerMatches=trigger.custom_event_use_regex?varvalidation.matchRegex(trigger,trigger.custom_event_name):trigger.custom_event_name===event.detail;if(!triggerMatches){continue}}if(TriggerHandler.isTriggerFiltersSatisfied(trigger)){validTriggers[key]=trigger}}return validTriggers}};function start(){try{ZTMDataHandler.processQueue();TriggerHandler.processTriggers();EventHandler.registerListeners();ZTMDataHandler.dispatchEventQueue()}catch(e){LOGGER.log("Exception occured on start of script",error)}}start()})(window);
